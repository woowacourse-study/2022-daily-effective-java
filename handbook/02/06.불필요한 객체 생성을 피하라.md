# ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ë¼

## String ì„ í†µí•´ ì•Œì•„ë³´ëŠ” ê·¹ë‹¨ì ì¸ ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„± ì˜ˆì‹œ

> ì„ ìˆ˜ ì§€ì‹ : ìë°”ëŠ” ë¬¸ìì—´ ë¦¬í„°ëŸ´ (`â€â€`) ì´ ë™ì¼í•˜ë‹¤ë©´, String ê°ì²´ë¥¼ ê³µìœ í•œë‹¤.

```java
String s1 = new String("hello java");
String s2 = new String("hello java");
// ê°™ì€ ë¬¸ìì—´ì„ ë‹´ê³  ìˆì§€ë§Œ, ê°ì²´ê°€ ë‘ê°œ ìƒì„±ëœë‹¤.
// s1 ì™€ s2 ëŠ” ì„œë¡œ ë‹¤ë¥¸ String ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤.

String s3 = "hello java";
String s4 = "hello java";
// Heap ì˜ì—­ì— String ê°ì²´ê°€ í•˜ë‚˜ë§Œ ìƒì„±ë˜ê³ , s3 ì™€ s4 ëŠ” ë™ì¼í•œ String ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤.
```

## ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ê¸° ìœ„í•œ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œ ì‚¬ìš©

[ì•„ì´í…œ1](https://github.com/woowacourse-study/2022-daily-effective-java/blob/main/handbook/02/01.%EC%A0%95%EC%A0%81%20%ED%8C%A9%ED%86%A0%EB%A6%AC%20%EB%A9%94%EC%84%9C%EB%93%9C%EB%A1%9C%20%EC%83%9D%EC%84%B1%20%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%EA%B0%9D%EC%B2%B4%EB%A5%BC%20%EC%83%9D%EC%84%B1%ED%95%98%EB%9D%BC.md)ì˜ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œì—ì„œ ì´ë¯¸ ë“±ì¥í•œ `Boolean` í´ë˜ìŠ¤ë¥¼ í†µí•œ ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„± í”¼í•˜ê¸°.

```java
Boolean b = Boolean.valueOf(true);

@HotSpotIntrinsicCandidate
public static Boolean valueOf(boolean b) {
    return (b ? TRUE : FALSE);
}
```

## ìƒì„± ë¹„ìš©ì´ ì•„ì£¼ ë¹„ì‹¼ ê°ì²´ëŠ” ìºì‹±ì„ í†µí•´ ì¬ì‚¬ìš©í•˜ì

ì•„ë˜ ì½”ë“œëŠ” `String` í´ë˜ìŠ¤ì˜ `matches` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ìì—´ì„ ì •ê·œí‘œí˜„ì‹ìœ¼ë¡œ ê²€ì‚¬í•œ ì˜ˆì œ.

`matches` ë©”ì†Œë“œëŠ” `Pattern` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ê³§ë°”ë¡œ ë²„ë¦°ë‹¤. ì¦‰, **ë°˜ë³µí•´ì„œ ì‚¬ìš©í•˜ê¸° ë¶€ì ì ˆ.**

```java
static boolean isRomanNumeralSlow(String s) {
    return s.matches("^(?=.)M*(C[MD]|D?C{0,3})"
            + "(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$");
}
```

ì§ì ‘ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ `Pattern` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ê³  **ìºì‹±**í•˜ì—¬ ìµœì í™” í•´ë³´ì.

```java
public class RomanNumerals {
    private static final Pattern ROMAN = Pattern.compile(
            "^(?=.)M&(C[MD]|D?C{0,3})"+"(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$");

    static boolean isRomanNumeral(String s) {
        return ROMAN.matcher(s).matches();
    }
}
```

> `Pattern.compile` ì€ ì£¼ì–´ì§„ ì •ê·œí‘œí˜„ì‹ì„ í†µí•´ `Pattern` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œë‹¤.

ìœ„ì™€ ê°™ì´ **ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¼ ê°ì²´**ëŠ” **í•œë²ˆë§Œ ìƒì„±í•˜ê³  ì¬ì‚¬ìš©**í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì„±ëŠ¥ í–¥ìƒì´ ê°€ëŠ¥í•˜ë‹¤. ì½”ë“œë„ ì½ê¸° ì‰½ê³ , ëª…í™•í•´ì¡ŒìŒ.

> (ì°¸ê³ ) ìœ„ ì˜ˆì œì— ê¸¸ì´ê°€ 8ì¸ ë¬¸ìì—´ì„ ì…ë ¥í–ˆì„ ë•Œ, ì•½ 6.5ë°°ì •ë„ ì„±ëŠ¥ì´ í–¥ìƒë˜ì—ˆë‹¤ê³  í•¨.

## ì–´ëŒ‘í„°(ë·°)ì˜ ê²½ìš°

> ì±…ì—ì„œëŠ” ì–´ëŒ‘í„° íŒ¨í„´ì„ í†µí•´ ì´ë¥¼ ì„¤ëª…í•˜ëŠ”ë°, ì–´ëŒ‘í„° íŒ¨í„´ì—ëŠ” ìµìˆ™ì¹˜ ì•Šì•„ì„œ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•œ ë¶€ë¶„ê¹Œì§€ë§Œ ì„œìˆ í•´ë³´ê² ìŠµë‹ˆë‹¤ ğŸ¥²Â  ì˜ ì•Œê³  ê³„ì‹œëŠ” ë¶„ì€ ì½”ë©˜íŠ¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤ ã…ã…..

`Map` í´ë˜ìŠ¤ì˜ `keySet` ì€ Map ê°ì²´ì˜ í‚¤ë¥¼ ì „ë¶€ ë‹´ì€ Set ì„ ë°˜í™˜í•œë‹¤. (ì´ Set ì„ Map ì˜ View ë¼ê³  í•œë‹¤)

```java
Map<Integer, String> map = new HashMap<>();

map.put(1, "hello");
map.put(2, "effective");
map.put(3, "java");
map.put(4, "3th");
map.put(5, "edition");

System.out.println(map);
// {1=hello, 2=effective, 3=java, 4=3th, 5=edition}
System.out.println(map.keySet());
// [1, 2, 3, 4, 5]
```

`keySet` ì€ í•­ìƒ ê°™ì€ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. ì¦‰ ì•„ë˜ì˜ ì½”ë“œëŠ” `true` ì´ë‹¤.

```java
Set<Integer> set1 = map.keySet();
Set<Integer> set2 = map.keySet();
System.out.println(set1 == set2); // true
```

ì¦‰, `set1` ì„ ìˆ˜ì •í•˜ë©´, `set2` ë„ ë³€í•˜ê²Œ ëœë‹¤. ì•„ë˜ì™€ ê°™ë‹¤.

```java
set1.remove("hello");
System.out.println(set1.size() == set2.size()); // true
```

ì¦‰, êµ³ì´ `keySet` ìœ¼ë¡œ ì—¬ëŸ¬ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì˜¤ëŠ” ì´ë“ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

### ë°•ì‹±ëœ ê¸°ë³¸íƒ€ì… ë³´ë‹¤ëŠ” ê¸°ë³¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ê³ , ì˜ë„ì¹˜ ì•Šì€ ì˜¤í† ë°•ì‹± (Auto Boxing) ì„ ì£¼ì˜í•˜ì

> ë°•ì‹±ëœ ê¸°ë³¸íƒ€ì…ì´ë€? ê¸°ë³¸ íƒ€ì…ì„ ë‚´ë¶€ì— ê°–ê³ ìˆëŠ” ê°ì²´. ì˜ˆë¥¼ë“¤ì–´ `int` ì˜ ë°•ì‹±ëœ ê¸°ë³¸íƒ€ì…ì€ `Integer`. í¬ì¥(Wrapper) í´ë˜ìŠ¤ ë¼ê³ ë„ í•¨.

**ì˜¤í† ë°•ì‹±?**

(ê´€ë ¨ ì•„ì´í…œ: [ì•„ì´í…œ 61. ë°•ì‹±ëœ ê¸°ë³¸ íƒ€ì…ë³´ë‹¤ëŠ” ê¸°ë³¸ íƒ€ì…ì„ ì‚¬ìš©í•˜ë¼](https://github.com/woowacourse-study/2022-daily-effective-java/blob/main/handbook/09/61.%20%EB%B0%95%EC%8B%B1%EB%90%9C%20%EA%B8%B0%EB%B3%B8%20%ED%83%80%EC%9E%85%EB%B3%B4%EB%8B%A4%EB%8A%94%20%EA%B8%B0%EB%B3%B8%20%ED%83%80%EC%9E%85%EC%9D%84%20%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC.md))

í¬ì¥ í´ë˜ìŠ¤ íƒ€ì…ì— ê¸°ë³¸ê°’ì´ ëŒ€ì… ë  ê²½ìš° ì˜¤í†  ë°•ì‹±ì´ ë°œìƒë˜ì–´ í™ ì˜ì—­ì— í¬ì¥ í´ë˜ìŠ¤ íƒ€ì…ì´ ìƒì„±ë¨.

```java
Integer number = 100; // ì˜¤í†  ë°•ì‹±
```

**ì˜ë„ì¹˜ ì•Šì€ ì˜¤í† ë°•ì‹±ìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ì €í•˜**

ì•„ë˜ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ë©´ `Long` ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ëª‡ ë²ˆ ìƒì„±ë ê¹Œ? (`Integer.MAX_VALUE` == 2^31)

```java
long sum() {
    Long sum = 0L;
    for (long i = 0; i <= Integer.MAX_VALUE; i++)
        sum += i;
    return sum;
}
```

`sum` ì— `i` ê°€ ë”í•´ì§ˆ ë•Œ ë§ˆë‹¤ `Long` ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ìƒˆë¡œ ìƒì„±ëœë‹¤. ì¦‰, 2^31 ë²ˆì´ë‚˜ ìƒì„±ëœë‹¤.
`Long` í¬ì¥ í´ë˜ìŠ¤ë¥¼ `long` ê¸°ë³¸ íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ë©´, ì„±ëŠ¥ì€ ì•½ 10ë°°ë‚˜ ë¹¨ë¼ì§„ë‹¤.

## ê°ì²´ ìƒì„± ìì²´ê°€ ë¹„ì‹¸ë‹ˆ í”¼í•´ì•¼ í•œë‹¤â€ ë¼ê³  ì˜¤í•´í•˜ë©´ ì•ˆëœë‹¤.

ìµœê·¼ JVM ì€ ì‘ì€ ê°ì²´ì˜ ìƒì„±, íšŒìˆ˜ëŠ” í° ë¶€ë‹´ì´ ì•ˆëœë‹¤. í”„ë¡œê·¸ë¨ì˜ ëª…í™•ì„±, ê°„ê²°ì„±, ê¸°ëŠ¥ì„ ìœ„í•œ ê°ì²´ ì¶”ê°€ ìƒì„±ì€ ì¼ë°˜ì ìœ¼ë¡œ ì¢‹ì€ ì¼ì´ë‹¤.
ë”°ë¼ì„œ **ê°ì²´ í’€ (Object Pool)** ì„ ìƒì„±í•˜ëŠ” ê²ƒì€ í•˜ì§€ ë§ì.

> ê°ì²´ í’€ì´ë€? ìì£¼ ìƒì„±ë˜ê³  íŒŒê´´ë˜ëŠ” ê°ì²´ì˜ ê²½ìš° ìƒì„±, íŒŒê´´, ìƒì„±, íŒŒê´´ ... ë¡œ ì¸í•œ ìì› ë‚­ë¹„ (ì˜¤ë²„í—¤ë“œ) ë¥¼ ë§‰ê¸° ìœ„í•´ ì¼ì •ëŸ‰ì˜ ê°ì²´ë¥¼ **ë¯¸ë¦¬ ë§~ì´ ìƒì„±**í•´ë‘ê³ , ì¬ì‚¬ìš© í•˜ëŠ” ë°©ë²•. ì£¼ë¡œ ê²Œì„ì—ì„œ ì“°ì„.
> ìµœê·¼ì˜ JVM ì˜ ê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ìƒë‹¹íˆ ìµœì í™”ë˜ì–´ ê°€ë²¼ìš´ ê°ì²´ì˜ ê²½ìš°, ê°ì²´í’€ì„ ë§Œë“œëŠ” ê²ƒì´ ë” ëŠë¦´ ìˆ˜ë„ ìˆìŒ. ë¬´ì—‡ë³´ë‹¤ ê°ì²´ í’€ì— ìƒì„±ë˜ì—ˆì§€ë§Œ, ì •ì‘ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ê°ì²´ëŠ” ë©”ëª¨ë¦¬ ë‚­ë¹„ì„.

## ì°¸ê³ 

- [https://rockintuna.tistory.com/135](https://rockintuna.tistory.com/135)
- [https://jithub.tistory.com/309](https://jithub.tistory.com/309)

## ê¸°íƒ€ ì—°ê´€ ì•„ì´í…œ

- [83. ì§€ì—° ì´ˆê¸°í™”ëŠ” ì‹ ì¤‘íˆ ì‚¬ìš©í•˜ë¼](https://github.com/woowacourse-study/2022-daily-effective-java/blob/main/handbook/11/83.%20%EC%A7%80%EC%97%B0%20%EC%B4%88%EA%B8%B0%ED%99%94%EB%8A%94%20%EC%8B%A0%EC%A4%91%ED%9E%88%20%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC.md)
- [67. ìµœì í™”ëŠ” ì‹ ì¤‘íˆ í•˜ë¼](https://github.com/woowacourse-study/2022-daily-effective-java/blob/main/handbook/09/67.%20%EC%B5%9C%EC%A0%81%ED%99%94%EB%8A%94%20%EC%8B%A0%EC%A4%91%ED%9E%88%20%ED%95%98%EB%9D%BC.md)
- [50. ì ì‹œì— ë°©ì–´ì  ë³µì‚¬ë³¸ì„ ë§Œë“¤ë¼](https://github.com/woowacourse-study/2022-daily-effective-java/blob/main/handbook/08/50.%20%EC%A0%81%EC%8B%9C%EC%97%90%20%EB%B0%A9%EC%96%B4%EC%A0%81%20%EB%B3%B5%EC%82%AC%EB%B3%B8%EC%9D%84%20%EB%A7%8C%EB%93%A4%EB%9D%BC.md)
